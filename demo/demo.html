<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="stylesheet" type="text/css" href="demo.css" />
    </head>
    <body>
        <h1>Hello world! jquery-sew demo.</h1>
        <h3>enable auto-complete by typing @ </h3>
        <div>
        	<h4> Works on any textarea/input element from your document </h4>
					<textarea style="width:415px;height: 300px;"></textarea>
				</div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="../jquery.caretposition.js"></script>
				<script type="text/javascript" src="../jquery.sew.js"></script>
		<script>
			$(document).ready(function() {
				var values = function(val,callback){

					var data =   [{name:'santiagotactivos', meta:'Santiago Montero'},
							  {name:'johnny halife', meta:'Johnny Halife'},
							  {name:'ariel flesler', meta:'Ariel Flesler'},
							  {name:'raul bajales', meta:'Raul Bajales'},
							  {name:'Juan Manuel', meta:'Juan Manuel'},
							  {name:'Pablo Golfred', meta:'Pablo Golfred'},
							  {name:'Valeria Morisa', meta:'Valeria Morisa'},
							  {name:'Ernesto Sabio', meta:'Ernesto Sabio'},
							  {name:'Jimena Dilous', meta:'Jimena Dilous', otro: 'OTro', id: '1234'}]

					if(typeof callback == 'function'){
						callback(data);
						return;
					}
					return data;

				};


				var customItemTemplate = "<div><span />&nbsp;<small /></div>";

				function elementFactory(element, e) {
					var template = $(customItemTemplate).find('span').text('@' + e.name).end().find('small').text("(" + (e.meta || e.name) + ")").end();
					element.append(template);
				};

				// here is how we use it
				$('textarea').sew({values: values, elementFactory: elementFactory, val: 'name'}).on('mention-selected',function(e, mention){
					console.log(arguments);
				});

			});
		</script>
    </body>
</html>
